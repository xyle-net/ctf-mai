@font-face {
  font-family: 'VT323';
  src: local('VT323'), url('https://fonts.gstatic.com/s/vt323/v17/pxiKyp0ihIEF2isfFJU.woff2') format('woff2');
}
* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; }
body {
  background: #040816 url('assets/map.png') no-repeat center center fixed;
  background-size: 85% auto; /* Scaled down image */
  color: #cfe8cf;
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  overflow: hidden;
  position: relative;
  text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000; /* Black outline for all text */
}
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: radial-gradient(ellipse at center, rgba(50, 20, 80, 0.7) 0%, rgba(20, 30, 70, 0.9) 30%, rgba(10, 15, 50, 1) 60%, rgba(0, 0, 20, 1) 100%);
  z-index: -2;
  animation: starfield 500s linear infinite;
  background-image: 
    radial-gradient(rgba(255, 255, 255, 0.8) 1px, transparent 1px),
    radial-gradient(rgba(200, 200, 255, 0.6) 1px, transparent 1px),
    radial-gradient(rgba(255, 200, 200, 0.4) 1px, transparent 1px);
  background-size: 100px 100px, 150px 150px, 200px 200px;
  background-position: 0 0, 50px 50px, 100px 100px;
}
@keyframes starfield {
  from { transform: translateY(0); }
  to { transform: translateY(-2000px); }
}
#hud { position: fixed; top: 16px; left: 16px; z-index: 5; }
#hud h1 {
  margin: 0 0 4px;
  font-size: 22px;
  color: #c2d9ff;
}
#progress { font-size: 14px; opacity: .8; }

#map { width: 100%; height: 100%; display: grid; place-items: center; }

#stations .node {
  fill: #7b86a8; stroke: #ffd34d; stroke-width: 2; opacity: 0.1;
  filter: drop-shadow(0 0 0 rgba(255,241,118,.0));
  transition: transform .15s ease, filter .2s ease;
}
#stations .deco { fill: #ffd34d33; stroke: #ffd34d66; }
#stations .label {
  font-size: 14px;
  text-anchor: middle;
  fill: #d2d8ff;
  font-weight: 600;
}

.module { cursor: pointer; }
.module:hover .node {
  filter: drop-shadow(0 0 8px rgba(173,255,47,.7));
  transform: translateY(-2px) scale(1.03);
  opacity: 0.1;
}

/* Terminal UI */
#terminal.hidden { display: none; }
#terminal {
  position: fixed; inset: 0; display: grid; place-items: center; background: rgba(0,0,0,.45);
}
.crt {
  width: min(900px, 92vw);
  height: min(560px, 80vh);
  background: #0a1d0a;
  border: 2px solid #4caf50;
  box-shadow: 0 0 30px #0f380f, inset 0 0 60px rgba(76,175,80,.15);
  color: #b6ffb2;
  font-family: "VT323", monospace;
  position: relative;
  overflow: hidden;
  text-shadow: none; /* Remove text outline for terminal */
}
.crt:before, .crt:after {
  content:""; position:absolute; inset:0; pointer-events:none;
}
.crt:before { background: repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 2px, rgba(0,0,0,0) 2px 4px); mix-blend-mode: overlay; }
.crt:after { animation: flicker 4s infinite; background: radial-gradient(circle at 50% 10%, rgba(255,255,255,.06), transparent 40%); }
@keyframes flicker { 0%,100%{opacity:.15} 50%{opacity:.3} }

.term-header {
  display:flex; align-items:center; justify-content:space-between;
  background:#0f350f; padding:8px 12px; border-bottom:1px solid #4caf50;
  letter-spacing:1px; font-size:20px;
}
.term-output {
  padding: 12px;
  height: calc(100% - 96px);
  overflow:auto;
  white-space:pre-wrap;
  line-height: 1.3;
  font-size: 22px;
}
.term-input { display:flex; gap:8px; align-items:center; padding:8px 12px; border-top:1px solid #4caf50; font-size:22px; }
.term-input input {
  flex:1; background:transparent; border:none; outline:none; color:#b6ffb2; font:inherit;
  caret-color:#b6ffb2;
}
.term-input input::placeholder{ color:#83d483; opacity:.5; }
#closeTerm { background: transparent; color:#b6ffb2; border:1px solid #4caf50; font-size:20px; padding:2px 10px; cursor:pointer; }
#closeTerm:hover { background:#154d15; }

/* scanlines shimmer cursor */
.cursor { animation: blink 1s steps(1) infinite; }
@keyframes blink { 50% { opacity: 0; } }

.success { color:#aef1ae; }
.fail { color:#ffbdbd; }
.note { color:#bde0bd; opacity:.85; }

a.asset { color:#c7ffb7; text-decoration: underline; }

#progress {
  color: rgba(0, 0, 0, 0); 
}